---
title: Integrate document version diffing
meta:
  title: History extension | Tiptap Editor Docs
  description: Editor History for manual and automatic versioning of your documents. Learn how to set up and use it here in the Docs!
  category: Collaboration
extension:
  name: History
  description: 'Document version history for manual and automatic versioning of your documents.'
  type: extension
  icon: FileStack
  isPro: true
  isNew: true
  isCloud: true
---

import { Callout } from '@/components/ui/Callout'
import { CodeDemo } from '@/components/CodeDemo'

This extension builds on document history versions to allow diffing versions. With it, you have the flexibility to render the differences between versions in your editor.

Not only can you view the differences between versions, but you can also show which users made the changes. This is especially useful for collaborative editing, where multiple users are working on the same document.

<Callout title="Public Demo" variant="warning">
  The content of this editor is shared with other users.
</Callout>

<CodeDemo isPro path="/Extensions/UserHistory" />

## Install

<Callout title="Set up access to Tiptap’s private repository" variant="info">
  Gain access to this pro extension by registering for a free [Tiptap
  account](https://cloud.tiptap.dev/register) and following our [access
  guide](/guides/pro-extensions) to Tiptap’s private repository.
</Callout>

```bash

npm install @tiptap-pro/extension-collaboration-history @hocuspocus/transformer

```

**Note**:
The `@hocuspocus/transformer` package is required for transforming Y.js binary to Tiptap JSON content. The package also requires a Y.js installation which is required for collaboration. If you don't have it installed, run `npm install yjs` in your project.
This should automatically happen if you are using NPM (as it automatically resolves peer dependencies).

## Settings

| Setting  | Type                   | Default    |
| -------- | ---------------------- | ---------- |
| provider | `TiptapCollabProvider` | `null`     |
| onUpdate | `function`             | `() => {}` |

## Storage

| Key               | Type                   | Description                                                                     |
| ----------------- | ---------------------- | ------------------------------------------------------------------------------- |
| currentVersion    | `number`               | The current version.                                                            |
| lastSaved         | `Date`                 | The last saved timestamp                                                        |
| latestVersion     | `number`               | The latest version.                                                             |
| provider          | `TiptapCollabProvider` | The Collaboration provider instance                                             |
| status            | `string`               | The status of the provider - can be `connecting`, `connected` or `disconnected` |
| synced            | `boolean`              | Is the version history synced with the server                                   |
| versioningEnabled | `boolean`              | Is versioning enabled                                                           |
| versions          | `array<Version>`       | The array of versions that are stored in the history.                           |

## Commands

| Command          | Description                                                                       |
| ---------------- | --------------------------------------------------------------------------------- |
| saveVersion      | Creates a new version with a given title                                          |
| toggleVersioning | Toggles auto versioning for this document                                         |
| revertToVersion  | Revert to a specific version, can create a new revert version with optional title |

## Examples

### Basic Setup

```js
const provider = new TiptapCollabProvider({
  // ...
})

const editor = new Editor({
  // ...
  extensions: [
    // ...
    CollabHistory.configure({
      provider,
    }),
  ],
})
```

### Store version updates

In this example we retrieve the data of a version update and save it into a variable

```js
let currentVersion = 0
let latestVersion = 0
let autoversioningEnabled = false
let versions = []

const provider = new TiptapCollabProvider({
  // ...
})

const editor = new Editor({
  // ...
  extensions: [
    // ...
    CollabHistory.configure({
      provider,
      onUpdate(payload) {
        currentVersion = payload.currentVersion
        latestVersion = payload.version
        versions = payload.versions
        autoversioningEnabled = payload.autoVersioning
      },
    }),
  ],
})
```
